command:
  admin-command:
    exec: mongosh --quiet --username "$MONGODB_ROOT_USER" --password "$MONGODB_ROOT_PASSWORD" --port "$MONGODB_PORT_NUMBER" --eval "db.adminCommand({listCollections:1})"
    exit-status: 0
    stderr: []
    stdout:
      - system.version
    timeout: 20000
  create-collection:
    exec: mongosh --quiet --username "$MONGODB_EXTRA_USERNAMES" --password "$MONGODB_EXTRA_PASSWORDS" --port "$MONGODB_PORT_NUMBER" --eval "db.sapphire.drop(); db.createCollection('sapphire'); db.getCollectionNames()" "$MONGODB_EXTRA_DATABASES"
    exit-status: 0
    stderr: []
    stdout:
      - sapphire
    timeout: 20000
  mongod-version:
    exec: mongod --version | grep --quiet "$APP_VERSION"
    exit-status: 0
    stderr: []
    stdout: []
    timeout: 20000
file:
  /opt/bitnami/mongodb/conf/mongodb.conf:
    contains:
      - 'dbPath: /bitnami/mongodb/data/db'
      - 'authorization: enabled'
    exists: true
    filetype: file
    mode: "0660"
process:
  mongod:
    running: true
